{% extends 'master.twig'%}
{% block title %}{{ question.title|e }} - Engineer Man{% endblock %}
{% block description %}{{ question.description|e }}{% endblock %}
{% block content %}
    <div style="padding: 30px 20px 15px 15px;">
        <div style="float: right; width: 260px;">
            <h5 class="f700">Metadata</h5>
            <p>
                Views: 0<br />
                Participants: 0<br />
                Last Activity: 0
            </p>
        </div>
        {{ question.question_plaintext }}
        <div style="position: relative; padding-right: 290px;">
            <div id="question"></div>
            <script>
                ReactDOM.render(React.createElement(Question, {
                    question_id: {{ question.question_id }},
                    user_id: {{ question.user_id }},
                    score: {{ question.score }},
                    value: {{ question.vote != null ? question.vote.value : 'null' }},
                    time_ago: {{ question.time_ago|json_encode }},
                    title: {{ question.title|json_encode }},
                    question: {{ question.question }},
                    user: {{ question.user|json_encode }},
                    tags: {{ question.tags|json_encode }},
                    session_user_id: +'{{ req.glob.user_id }}'
                }), document.getElementById('question'));
            </script>

            <h5 class="f700" style="margin-top: 40px;">{{ question.comments }} comments</h5>
            <div id="create_comment"></div>
            <div class="em_comments">
                <div id="comments"></div>
                <script>
                    comments = ReactDOM.render(React.createElement(Comments, {
                        comments: {{ comments }}
                    }), document.getElementById('comments'));
                </script>
            </div>
            <script>
                ReactDOM.render(React.createElement(CreateComment, {
                    insert: comments.insert,
                    question_id: {{ question.question_id }},
                    parent_id: null
                }), document.getElementById('create_comment'));
            </script>
        </div>
    </div>
{% endblock %}
